# backend/Dockerfile
FROM node:24-alpine

WORKDIR /app

# Instalar dependencias necesarias para serverless
RUN apk add --no-cache \
    python3 \
    make \
    g++ \
    curl \
    aws-cli

# Copiar package.json y package-lock.json
COPY package*.json ./

# Instalar dependencias
RUN npm ci --only=production

# Copiar el c√≥digo fuente
COPY . .

# Instalar serverless CLI globalmente
RUN npm install -g serverless

# Exponer puerto
EXPOSE 3000

# Comando para desarrollo
CMD ["npm", "run", "dev"]